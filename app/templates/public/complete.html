<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>index</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"
        integrity="sha384-SI27wrMjH3ZZ89r4o+fGIJtnzkAnFs3E4qz9DIYioCQ5l9Rd/7UAa8DHcaL8jkWt" crossorigin="anonymous">
    <!-- Style  -->
    <link rel="stylesheet" type="text/css" href="/templates/public/css/complete.css">

</head>

<body>
    <nav class="menu navbar navbar-light">
        <a class="navbar-brand">PDF inspect</a>
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="/">Salir <span class="sr-only">(current)</span></a>
            </li>
        </ul>
    </nav>
    <!-- Formulario para recoger el nombre del estudio-->
    <div class="container">
        <div class="row">
            <div class="col-md">
                <div class="form-group">
                    <form id="formulario" action="{{url_for('getExcel')}}" method="POST">
                        <br>
                        <br>
                        <br>
                        <label for="nombre" class="col-lg-2 col-form-label">Nombre del estudio:</label>
                        <input type="text" class="form-control" id="nombre" name="pynombre">
                        <br>
                        <input type="hidden" id="listaAneca" value="" name="pylistadoAneca">
                        <input type="submit" class="btn-lg btn-primary" value="Bajar Archivo">
                        <button onclick="guardarEstudio()" id="botonEstudio" type="button"
                            class="btn-lg btn-primary">Guardar Estudio</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="tabs">
            <ul class="tabs-nav" id="list-PDFs">
                <li><a href="#tab-1"></a></li>
                <li><a href="#tab-2"></a></li>
                <li><a href="#tab-3"></a></li>
                <li><a href="#tab-4"></a></li>
                <li><a href="#tab-5"></a></li>
                <li><a href="#tab-6"></a></li>
                <li><a href="#tab-7"></a></li>
                <li><a href="#tab-8"></a></li>
            </ul>
            <div class="tabs-stage">
                <div id="tab-1">
                    <p id="listado"></p>
                </div>
                <div id="tab-2">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna auctor
                        at.</p>
                </div>
                <div id="tab-3">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna
                        auctor
                        at.</p>
                </div>
                <div id="tab-4">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna
                        auctor
                        at.</p>
                </div>
                <div id="tab-5">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna
                        auctor
                        at.</p>
                </div>
                <div id="tab-6">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna
                        auctor
                        at.</p>
                </div>
                <div id="tab-7">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna
                        auctor
                        at.</p>
                </div>
                <div id="tab-8">
                    <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna
                        auctor
                        at.</p>
                </div>

            </div>
        </div>


        <!-- Listado con los items -->
        <div id="listado"></div>
    </div>
</body>

</html>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/js/bootstrap.min.js"
    integrity="sha384-3qaqj0lc6sV/qpzrc1N5DC6i1VRn/HyX4qdPaiEFbn54VjQBEU341pvjz7Dv3n6P"
    crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
<script type="text/javascript" src="/templates/public/js/complete.js"></script>

<script>
    var actualizar
    //Rellenamos los datos de la tabla
    $(document).ready(function () {
        var aux = '{{ data|safe }}'
        var datos = JSON.parse(aux)
        if (datos.hasOwnProperty('id')) {
            $.ajax({
                type: 'POST',
                url: "/verDetalles",
                data: aux,
                contentType: "application/json",
                encode: true,
                success: function rellena(data) {
                    actualizar = data
                    tablaHtml(data['comparativa'])
                    document.getElementById("listaAneca").value = JSON.stringify(data['comparativa']);
                    getPDFs(data['comparativa']);
                    //Actualizamos el boton
                    document.getElementById("botonEstudio").setAttribute("onclick", "actualizarEstudio()");
                    document.getElementById("botonEstudio").innerHTML = "Actualizar estudio"
                    document.getElementById("nombre").value = data['nombre']
                },
                error: function (data) {
                    alert("Algo ha fallado!!! :( ");
                    console.log(data)
                }
            });
        } else {
            tablaHtml(datos)
            document.getElementById("listaAneca").value = aux;
            getPDFs(datos);
        }
    });
</script>